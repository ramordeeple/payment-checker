syntax = "proto3";

package paymentchecker.v1;

option go_package = "payment-checker/internal/grpc/paymentchecker/v1;paymentcheckerv1";

enum ValidationReason {
  VALIDATION_REASON_UNSPECIFIED = 0;
  OK = 1;
  RATE_UNAVAILABLE = 2;
  LIMIT_EXCEEDED = 3;
}

message ValidatePaymentRequest {
  string provider = 1;
  int64 amount = 2;
  string currency = 3;
  string date = 4;
}

message ValidatePaymentResponse {
  bool allowed = 1;
  int64 total_rub_in_kopecks = 2;
  ValidationReason reason = 3;
}

service PaymentChecker {
  rpc Validate(ValidatePaymentRequest) returns (ValidatePaymentResponse);
}
